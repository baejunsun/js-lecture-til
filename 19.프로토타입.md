# 프로토타입

자바스크립트는 명령형,함수형,프로토타입 기반 객체지향 프로그래밍을 지원하는 멀티 패러다임 프로그래밍 언어다.

- ex6에서 클래스가 새롭게 도입되었다.



## 1.객체지향 프로그래밍

객체들의 집합으로 프로그램을 표현하려는 프로그래밍 패러다임



- 철학적 사고를 프로그래밍에 접목하려는 시도에서 시작
  - 실체는 속성을 가지고 있고 이를통해 실체를 인식하거나 구별
  - 다양한 속성중에서 필요한 속성만을 간추려 내어 표현하는 것을 추상화라 한다.
- 속성을 통해 여러개의 값을 하나의 단위로 구성한 복합적인 자료구조를 객체라 한다.
- 상태 데이터와 동작을 하나의 논리적인 단위로 묶은 복합적인 자료구조.상태 데이터를 프로퍼티, 동작을 메소드라 부른다.
- 객체는 자신의 고유한 기능을 수행하면서 다른 객체와 관계성을 갖을 수 있다. 다른 객체의 상태 데이터나 동작을 상속받아 사용하기도 한다.



## 2.상속과 프로토타입

상속은 객체지향 프로그래밍의 핵심새념

어떤 객체의 프로퍼티 또는 메소드를 다른객체가 상속받아 그대로 사용할 수 있는 것을 말한다.



- 프로토타입을 기반으로 상속을 구현하여 불필요한 중복을 제거

```
생성자함수이름.prototype.객체이름
```

위로 생성한 객체는 생성자함수의 prototype 프로퍼티에 저장되고 위 생성자함수로 생성된 객체에는 위에서 생성한 객체가 공통적으로 상속된다.



## 3.프로토타입 객체

- 프로토타입은 어떤 객체의 상위객체의 역활을 하는 객체로서 다른 객체에 공유 프로퍼티르 ㄹ제공한다.



- 상속받은 하위 객체는 상위 객체의 프로퍼티를 자신의 프로퍼티처럼 자유롭게 사용할수 있다.



- 모든객체는 [[prototype]] 이라는 내부 슬롯을 가지며 이 내부 슬롯의 값은 프로토타입의 참조이다??

- 객체 생성방식에 따라 프로토타입이 결정되고 [[prototype]]에 저장된다.
- 객체 리터럴에 의해 생성된 객체의 프로토타입은 Object.prototype
- 생성자함수에 의해 생성된 객체의 프로토타입은 생성자 함수의 prototype 프로퍼티에 바인딩되어 있는 객체이다.
- 모든객체는 하나의 프로토타입을 갖는다.???
- 모든 프로토타입은 생성자 함수와연결되어 있다.

= 객체와 프로토타입과 생성자 함수는 서로 연결되어 있다

*객체는 __proto__ 접근자 프로퍼티를 통해 자신의 프로토타입, 즉 자신의 [[Prototype]] 내부 슬롯이 가리키는 프로토타입에 간접적으로 접근할 수 있다. 그리고 프로토타입은 자신의 constructor 프로퍼티를 통해 생성자 함수에 접근할 수 있고, 생성자 함수는 자신의 prototype 프로퍼티를 통해 프로토타입에 접근할 수 있다.



### 3.1 ______proto______ 접근자 프로퍼티

*모든객체는 _ _ proto _ _ 접근자 프로퍼티를 통해 자신의 포로토타입, 즉 [[Prototype]] 내부 슬롯에 간접적으로 접근할 수 있다.*

- 내부슬롯은 프로퍼티가 아니다.

= 자바스크립트는 내부슬롯과 내부 메소드에 직접적으로 접근하거나 호출할 수 있는 방법을 제공하지 않는다.

= 일부 내부 슬롯과 내부메소드에 한하여 간접적으로 접글할 수 있는 수단을 제공

=_ _ proto__ 접근자 프로퍼티를 통해 간접적으로 [[Prototype]] 내부 슬롯의 값 즉 프로토타입에 접근할 수 있다.



- 접근자 프로퍼티는 접근자 함수로 구성된 프로퍼티다.
  - 접근자 함수 = 자체적으로는 값을 갖지 않고 다른 데이터 프로퍼티의 값을 읽거나 저장할 때 사용하는 함수
- __proto _ _ 는 getter/setter 를통해 내부슬롯의값,즉 프로토타입을 취득하거나 할당한다.
- 접근자 프로퍼티를 통해 프로토타입에 접근하면 내부적으로  get __proto__호출 
- 새로운 프로토타입을 할당하면 __proto__ 접근자 프로퍼티의 setter 함수인 set __proto__가 호출

*_proto__ 접근자 프로퍼티는 객체가 직접 소유하는 프로퍼티가 아니라 Object.prototype의 프로퍼티이다. 모든 객체는 상속을 통해 Object.prototype.__proto__ 접근자 프로퍼티를 사용할 수 있다.



*모든 객체는 프로토타입 체인에 묶여있다. 객체에 접근하려는 메소드가 없다면 프로토 접근자 프로퍼티가 가리키는 링크를 따라 자신의 부모 역활을 하는 프로토타입의 프로퍼티를 순차적으로 검색한다.



[[Prototype]] 내부 슬롯의 값, 즉 프로토타입에 접근하기 위해 접근자 프로퍼티를 사용하는 이유는 상호 참조에 의해 프로토타입 체인이 생성되는 것을 방지하기 위함이다. 



- 프로토타입 체인은 단방향 링크드 리스트로 구현되어야 한다.

= 순환참조되면 프로토타ㅣㅂ 체인에서 프로퍼티를 검색할 때 무한 루프에 빠진다.

= 무조건적으로 프로토타입을 교체할 수 없도록 __proto__ 접근자 프로퍼티를 통해 프로토타입에 접근하고 교체하도록 구현되어 있다.



- 프로토 접근자 프로퍼티를 코드 내에서 직접 사용하는 것은비추

  - 모든 객체가 포로토 접근자 프로퍼티를 사용할 수 있는 것은 아니기 때문이다

  - =프로토타입의 참조를 취득하고 싶은 경우, __proto__ 접근자 프로퍼티 대신 [Object.getPrototypeOf 메소드](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)를, 프로토타입을 교체하고 싶은 경우, [Object.setPrototypeOf 메소드](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf)를 사용할 것을 권장한다.

  - ```
    object.getprototypeof(객체이름)//객체의 프로토타입을 상속
    object.getprototypeof(객체1,객체2)//객체2의 프로토타입으로 교체
    ```

  

### 3.2함수 객체의 prototype 프로퍼티

프로토 접근자 프로퍼티 이외에 prototype 프로퍼티도 소유

=함수객체만이 소유

=생성자함수가 생성할 인스턴스의 프로토타입을 가리킨다.

=따라서 생성자 함수로서 호출할 수 없는 함수는 prototype프로퍼티를 소유하지 않는다.  화살표함수 메소드 = non-constructor

=객체를 생성하지 않는 일반함수의 prototype프로퍼티는 아무런 의미가 없다.



??생성자 함수가 객체를 생성하기 전에 참조하면 뭐가 나오나???

생성자함수의 prototype에서 생성된 객체의 __proto_ _으로 접근?



### 3.3프로토타입의 constructor 프로퍼티와 생성자 함수

 모든 프로토타입은 constructor 프로퍼티를 갖는다.

=prototype프로퍼티로 자신을 참조하고 있는 생성자 함수를 가리킨다.

=이 연결은 생성자 함수가 생성될때, 즉 함수 객체가 생성될때 이루어진다



## 4.리터럴 표기법에 의해 생성된 객체의 생성자 함수와 프로토타입

리터럴 표기법에 의해 생성된 객체도 물론 프로토타입이 존재한다. 

=하지만프로토타입의 constructor 프로퍼티가 가리키는 생성자 함수가 반드시 객체를 생성한 생성자 함수라고 단정할 수느 없다.

*object로 인해 생성된것처럼한다.



*프로토타입과 생성자 함수는 단독으로 존재할 수 없고 언제나 쌍으로 존재하기 때문이다.



## 5.프로토타입 생성 시점

*프로토타입은 생성자 함수가 생성되는 시점에 더불어 생성된다.*

### 5.1사용자 정의 생성자 함수와 프로토타입 생성 시점

- constructor는 함수 정의가 평가되어 함수 객체를 생성하는 시점에 프로토타입도 더불어 생성된다.
- non-constructor는 프로토타입이 생성되지 않는다.
- 생성된 프로토타입은 생성자 함수의 prototype 프로퍼티에 바인딩된다. 

- 모든객체는 프로토타입을 갖는다 프로토타입도 객체이므로 자시느이 프로토타입을 갖는다. 생성된 프로토타입의 프로토타입은 object.prototype이다

### 5.2 빌트인 생성자 함수와 프로토타입 생성 시점

- 전역객체가 생성되는 시점에 빌트인 생성자함수 생성
- 프로토타입은 빌트인 생성자 함수의 prototype프로퍼티에 바인딩된다.



## 6.객체 생성 방식과 프로토타입의 결정

### 6.1객체 리터럴에 의해 생성된 객체의 프로토타입

### 6.2object 생성자 함수에 의해 생성된 객체의 프로토타입

