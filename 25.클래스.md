## 8.상속에 의한 클래스 확장

#### 클래스 상속과 생성자 함수 상속

상속에 의한 클래스 확장 = 기존의 클래스를 상속받아 새로운 클래스를 확장

extends키워드로 확장

class 상속받을 클래스이름 extends 상속해줄 클래스이름

*의사 클래스 상속  = 생성자 함수로 클래스의 상속을 비슷하게 구현할수 있다. apply로 상속할 개체를 호출하여 인수로 arguments를 줘서 모든 프로퍼티를 복제한다.

### extends 키워드

인스턴스의 프로토타입 체인뿐만이 아니라, 클래스 간의 프로토타입체인도 생성한다.

- 생성자 함수를 상속받아 클래스를 확장할 수도 있따. 단 extends키워드 앞에는 반드시 클래스가 와야한다.(extends 키워드 다음에는[[construct]]내부메소드를 갖는 함수객체를 반환하는 모든 표현식을 사용할수 있다.)

### 서브클래스의constructor

- constructor를 생략하면 클래스에 다음과 같은 디폴트가 암묵적으로 정의 'constructor(){}'

### SUPER키워드

- SUPER는 함수처럼 호출할수도있고 THIS처럼 식별자처럼 함조할 수 있는 특수한 키워드이다.
- super를 호출하면 수퍼 클래스의 constructor(super-constructor)를 호출한다.
- super를 참조하면 수퍼 클래스의 메소드를 호출할수 있따.
- super를 통해 상속관계의 두 클래스가 서로 협력하여 인스턴스를 생성한다.
- super를 호출할 때 주의할 사항
  - 서브 클래스에서 constructor를 생략하지 않는 경우, 서브클래스의 constructor에서는 반드시 super를 호출해야 한다. 에러
  - 서브 클래스의 constructor에서 super를 호출하기 전에는 this를 참조할 수 없다. 에러
  - super는 반드시 서브 클래스의 constructor에서만호출한다. 서블클래스가 아닌 클래스 또는 함수에서 호출하면 에러를 발생시킨다.
  - super참조 : 메소드 내에서 super를 참조하면 수퍼 클래스의 메소드를 호출할 수 있다.
    - 서브클래스의 프로토타입메소드내에서 super.prop는 수퍼 클래서의 포로토타입 메소드 prop를 가리킨다.
    - super는 자신이 바인딩되어 있는 객체의 프로토타입을 가리킨다.
    - super는 자신이 바인딩되어 있는 객체의 프로토타입을 가리킨다.
    - super참조가 동작하기 위해서는 메소드가 자신이 바인딩되어 있는 객체의 프로토타입을 찾을수있어야한다. 이를 위해 메소드는 [[HomeObject]] 내부슬롯을 갖으며 자신이 바인딩된 객체를 가리킨다.(축약 표현으로 정의된 함수만이 [[HomeObject]]를 갖는다는 것이다)
    - 객체 리터럴에서도 super참조 사용가능(축약표현으로 정의된 함수만 가능)
- 서브클래스의 정적메소드내에서 super.prop는 수퍼클래스의 정적메소드 prop를 가리킨다.

### 상속클래스의 인스턴스 생성 과정

1.서브클래스의 호출

클래스의 내부슬롯 [[ConstructorKind]]는 상속받지 않는 클래스(생성자함수)는 값이 base고 상속받으면 값이 derived로 설정된다. 이를 통해 new연산자와 함께 호출 되었을때의 동작이 구분된다.

서브클래스가 빈객체를 생성하지 않고 수퍼클래스에게 위임 = 서브 클래스의 constructor에서 반드시 super를 호출해야하는 이유

서브클래스호출 > constructor내부의 super키워드가 함수처럼 호출 > 수퍼클래스의 constructor(super-constructor)가 호출

2.수퍼클래스의 인스턴스 생성과 this 바인딩

수퍼클래스가 빈객체{인스턴스}생성. new.target은 호출된 서브 클래스를 가리키고 있기 때문에 인스턴스는 서브클래스가 생성한 것으로 처리

= 인스턴스의 포로토타입은 서브클래스의 prototype프로퍼티가 가리키는 객체가 된다

3.수퍼클래스의 인스턴스 초기화

수퍼클래스의 construcotr가 실행되어 this에 바인딩되어 있는 인스턴스를 초기화한다.

= 인수로 전달받은 초기값으로 인스턴스 초기화

= 인스턴스에 프로퍼티 추가

4.수퍼클래스의 프로토타입/정적 메소드 추가

5.서브클래스 constructor로의 복귀와 this 바인딩

서브클래스는 별도의 인스턴스를 생성하지 않고 super가 반환한 인스턴스를 this에 바인딩하여 그대로 사용한다.(super호출전에 this를 참조할수 없는 이유)

6.서브 클래스의 인스턴스 초기화

7.인스턴스 반환

### 표준 빌트인 생성자함수 확장

extends 키워드 다음에는 [[Construct]]내부메소드를 갖는 함수객체를 반환하는 모든 표현식을 사용할수있다. 따라서 표준빌트인 생성자함수도 올수있다.